import{j as t,r as d,u as N,a as w,s as y,p as u,T as P,b as S}from"./index-BtdP3B9z.js";import{P as B}from"./PageWrapper-P-CCqeZd.js";import{u as k,P as L}from"./ProductsList-DE7gNdVm.js";const _=({register:o,onChange:s})=>t.jsxs("div",{className:"all-products__sort-price flex gap-4 items-center",children:[t.jsx("h5",{className:"font-semibold text-[20px]",children:"Price"}),t.jsx("input",{className:"border-divider duration-300 border-2 rounded-md p-2 w-[95px] xs:w-[110px]",placeholder:"from",type:"number",...o("from",{onChange:s})}),t.jsx("input",{className:"border-divider duration-300 border-2 rounded-md p-2 w-[95px] xs:w-[110px]",placeholder:"to",type:"number",...o("to",{onChange:s})})]}),O=({register:o,isChecked:s,toggleCheckbox:c})=>t.jsx("div",{className:"all-products__sort-discount flex w-fit items-center",children:t.jsxs("label",{htmlFor:"discount",className:"flex gap-4 items-center cursor-pointer",tabIndex:0,children:[t.jsx("h5",{className:"font-semibold text-[20px] select-none",children:"Discounted items"}),t.jsx("input",{id:"discount",className:"hidden",type:"checkbox",checked:s,...o("discount",{onChange:c})}),t.jsx("div",{className:"w-8 h-8 border-2 border-divider rounded-md flex items-center justify-center mr-2 transition-all duration-300",children:s&&t.jsx("svg",{className:"min-w-8 h-8 pointer-events-none bg-green rounded-md",viewBox:"0 0 24 24",fill:"none",stroke:"white",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})}),T=({register:o,sortOptions:s,onChange:c,activeSelectValue:p})=>t.jsxs("div",{className:"all-products__sort-discount items-center flex gap-4",children:[t.jsx("h5",{className:"font-semibold text-[20px]",children:"Sorted"}),t.jsx("select",{className:"border-2 cursor-pointer border-divider p-2 rounded-md w-[200px]",...o("sortBy",{onChange:c}),value:p,children:s.map(n=>t.jsx("option",{value:n.value,children:n.label},n.value))})]}),A=o=>{let s;return()=>{clearTimeout(s),s=setTimeout(()=>{o()},500)}},V=({setOptions:o,setIsUpdating:s})=>{const{register:c,getValues:p,setValue:n}=k(),[f,m]=d.useState(!1),[i,g]=d.useState("By default"),j=N(),l=w(),v=()=>{m(!f),r()};d.useEffect(()=>{const e=new URLSearchParams(l.search);e.get("discount")==="true"?m(!0):m(!1),n("from",e.get("from")),n("to",e.get("to")),n("discount",e.get("discount")||!1),n("sortBy",e.get("sortBy")),g(e.get("sortBy")),r()},[l.search,n]);const r=()=>{s(!0);try{const e=p(),x=new URLSearchParams;x.set("from",e.from||""),x.set("to",e.to||""),x.set("discount",e.discount||""),x.set("sortBy",e.sortBy||""),j({pathname:l.pathname,search:x.toString()});const h=Object.keys(e).filter(a=>e[a]!=!1||a==="discount").reduce((a,b)=>(a[b]=e[b],a),{});h.from=+h.from||0,h.to=+h.to||500,o(a=>({...a,...h}))}catch(e){console.error(e)}finally{s(!1)}};return t.jsxs("section",{className:"all-products__sort inline-grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-[repeat(3,_minmax(0,max-content))] items-center gap-8",children:[t.jsx(_,{register:c,onChange:A(r)}),t.jsx(O,{register:c,isChecked:f,toggleCheckbox:v}),t.jsx(T,{register:c,sortOptions:y,onChange:r,activeSelectValue:i})]})},C=()=>{let o=0;for(let s=0;s<u.length;s++){const c=u[s].discount?Math.round(u[s].price*u[s].discount):u[s].price;o<c&&(o=c)}return o},D=()=>{const[o,s]=d.useState("All products"),[c,p]=d.useState(!1),[n,f]=d.useState({from:0,to:C(),discount:!1,sortBy:"default"}),m=d.useMemo(()=>{let i=[...u];const{from:g,to:j,discount:l,sortBy:v}=n;switch(i=i.filter(r=>{const e=r.discount?Math.round(r.price-r.price*r.discount):r.price;return e>=+g&&e<=+j&&(!l||r.discount)}),v){case"low-high":i.sort((r,e)=>r.price-(r.discount?r.price*r.discount:0)-(e.price-(e.discount?e.price*e.discount:0)));break;case"high-low":i.sort((r,e)=>e.price-(e.discount?e.price*e.discount:0)-(r.price-(r.discount?r.price*r.discount:0)));break;case"tools-and-equipment":return s("Tools and Equipment"),i.filter(r=>r.type==="tools-and-equipment")}return s(l?"Discounted items":"All products"),i},[n]);return t.jsx("div",{className:"all-products",children:t.jsxs("div",{className:"container",children:[t.jsx(P,{text:o}),t.jsx("div",{className:"mt-10 mb-2",children:t.jsx(V,{setIsUpdating:p,setOptions:f})}),c?t.jsx(S,{}):t.jsx(L,{list:m})]})})},q=()=>t.jsx(B,{children:t.jsx(D,{})});export{q as default};
