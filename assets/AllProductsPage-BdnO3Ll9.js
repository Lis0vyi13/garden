import{j as e,r as l,u as w,a as N,s as y,p as u,T as P,b as S}from"./index-OGQJNm-v.js";import{u as L,P as k}from"./ProductsList-BgtshSoZ.js";const _=({register:r,onChange:t})=>e.jsxs("div",{className:"all-products__sort-price flex gap-4 items-center",children:[e.jsx("h5",{className:"font-semibold text-[20px]",children:"Price"}),e.jsx("input",{className:"border-divider duration-300 border-2 rounded-md p-2 w-[95px] xs:w-[110px]",placeholder:"from",type:"number",...r("from",{onChange:t})}),e.jsx("input",{className:"border-divider duration-300 border-2 rounded-md p-2 w-[95px] xs:w-[110px]",placeholder:"to",type:"number",...r("to",{onChange:t})})]}),B=({register:r,isChecked:t,toggleCheckbox:i})=>e.jsx("div",{className:"all-products__sort-discount flex w-fit items-center",children:e.jsxs("label",{htmlFor:"discount",className:"flex gap-4 items-center cursor-pointer",tabIndex:0,children:[e.jsx("h5",{className:"font-semibold text-[20px] select-none",children:"Discounted items"}),e.jsx("input",{id:"discount",className:"hidden",type:"checkbox",checked:t,...r("discount",{onChange:i})}),e.jsx("div",{className:"w-8 h-8 border-2 border-divider rounded-md flex items-center justify-center mr-2 transition-all duration-300",children:t&&e.jsx("svg",{className:"min-w-8 h-8 pointer-events-none bg-green rounded-md",viewBox:"0 0 24 24",fill:"none",stroke:"white",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})}),O=({register:r,sortOptions:t,onChange:i})=>e.jsxs("div",{className:"all-products__sort-discount items-center flex gap-4",children:[e.jsx("h5",{className:"font-semibold text-[20px]",children:"Sorted"}),e.jsx("select",{className:"border-2 cursor-pointer border-divider p-2 rounded-md w-[200px]",...r("sortBy",{onChange:i}),children:t.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),T=({setOptions:r,setIsUpdating:t})=>{const{register:i,getValues:a}=L(),[m,p]=l.useState(!1),h=w(),f=N(),n=()=>{p(!m),x()};l.useEffect(()=>{new URLSearchParams(f.search).get("discount")&&p(!0)},[]);const x=()=>{t(!0);try{const c=a(),s=new URLSearchParams;s.set("from",c.from||""),s.set("to",c.to||""),s.set("discount",c.discount||""),s.set("sortBy",c.sortBy||""),h({pathname:f.pathname,search:s.toString()});const o=Object.keys(c).filter(d=>c[d]!=!1||d==="discount").reduce((d,b)=>(d[b]=c[b],d),{});o.from=+o.from||0,o.to=+o.to||500,r(d=>({...d,...o}))}catch(c){console.log(c)}finally{t(!1)}};let g;const j=()=>{clearTimeout(g),g=setTimeout(()=>{x()},500)};return e.jsxs("section",{className:"all-products__sort inline-grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-[repeat(3,_minmax(0,max-content))] items-center gap-8",children:[e.jsx(_,{register:i,onChange:j}),e.jsx(B,{register:i,isChecked:m,toggleCheckbox:n}),e.jsx(O,{register:i,sortOptions:y,onChange:x})]})},v=()=>{let r=0;for(let t=0;t<u.length;t++){const i=u[t].discount?Math.round(u[t].price*u[t].discount):u[t].price;r<i&&(r=i)}return r},A=()=>{const[r,t]=l.useState("All products"),[i,a]=l.useState(!1),[m,p]=l.useState({from:0,to:v(),discount:!1,sortBy:"default"}),h=N();l.useEffect(()=>{const n=new URLSearchParams(h.search);p({from:n.get("from")||0,to:n.get("to")||v(),discount:n.get("discount")==="true",sortBy:n.get("sortBy")})},[h.search]);const f=l.useMemo(()=>{let n=[...u];const{from:x,to:g,discount:j,sortBy:c}=m;switch(console.log(c),n=n.filter(s=>{const o=s.discount?Math.round(s.price*s.discount):s.price;return o>=+x&&o<=+g&&(!j||s.discount)}),c){case"low-high":n.sort((s,o)=>s.price*(s.discount||1)-o.price*(o.discount||1));break;case"high-low":n.sort((s,o)=>o.price*(o.discount||1)-s.price*(s.discount||1));break;case"tools-and-equipment":return t("Tools and Equipment"),n.filter(s=>s.type==="tools-and-equipment")}return t(j?"Discounted items":"All products"),n},[m]);return e.jsx("div",{className:"all-products",children:e.jsxs("div",{className:"container",children:[e.jsx(P,{text:r}),e.jsx("div",{className:"mt-10 mb-2",children:e.jsx(T,{setIsUpdating:a,setOptions:p})}),i?e.jsx(S,{}):e.jsx(k,{list:f})]})})},D=()=>e.jsx("div",{className:"flex flex-col gap-10 md:gap-20 pt-7 md:pt-12",children:e.jsx(A,{})});export{D as default};
